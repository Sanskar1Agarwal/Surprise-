<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For Muskan â¤ï¸ğŸ‚</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:#0f0f1a;
  color:white;
  text-align:center;
  overflow:hidden;
}

section{
  display:none;
  min-height:100vh;
  padding:30px;
}
section.active{display:block;}

button,input{
  padding:14px 28px;
  border:none;
  border-radius:25px;
  font-size:1em;
}

button{
  background:white;
  color:#ff4d6d;
  cursor:pointer;
  margin:10px;
}

h1{font-size:2.2em;}

#gameArea{
  position:relative;
  width:90%;
  height:60vh;
  border:2px dashed white;
  margin:20px auto;
  overflow:hidden;
}

/* floating hearts */
.bg-heart{
  position:absolute;
  animation:float 6s linear infinite;
}
@keyframes float{
  0%{transform:translateY(100vh);opacity:1;}
  100%{transform:translateY(-10vh);opacity:0;}
}

/* NO button */
#noBtn{position:absolute;}

/* ===== CAKE ===== */
.cake{
  position:relative;
  width:260px;
  height:230px;
  margin:40px auto;
}

/* layers */
.layer{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  background:#ff9fbf;
  border-radius:20px;
  transition:.5s;
}

.bottom{
  width:260px;
  height:110px;
  bottom:0;
}

.top{
  width:170px;
  height:75px;
  bottom:100px;
}

.icing{
  position:absolute;
  top:0;
  width:100%;
  height:25px;
  background:#ffc1dc;
  border-radius:20px;
}

/* candles */
.candle{
  position:absolute;
  width:10px;
  height:32px;
  background:white;
  top:-32px;
  cursor:pointer;
}
.candle:nth-child(1){left:45%;}
.candle:nth-child(2){left:55%;}
.candle:nth-child(3){left:65%;}

.flame{
  width:8px;
  height:12px;
  background:orange;
  border-radius:50%;
  position:absolute;
  top:-12px;
  left:1px;
  animation:flicker .2s infinite alternate;
}

@keyframes flicker{
  from{transform:scale(1);}
  to{transform:scale(1.2);}
}

/* knife */
#knife{
  position:absolute;
  font-size:40px;
  top:-60px;
  left:50%;
  transform:translateX(-50%);
  display:none;
  transition:.3s;
}

/* slices */
.slice{
  position:absolute;
  width:130px;
  height:110px;
  background:#ff9fbf;
  bottom:0;
  left:65px;
  clip-path:polygon(50% 0,100% 100%,0 100%);
  opacity:0;
  transition:.8s ease;
}

/* fireworks */
.firework{
  position:absolute;
  width:6px;
  height:6px;
  border-radius:50%;
  animation:explode 1.2s forwards;
}
@keyframes explode{
  from{transform:scale(1);opacity:1;}
  to{transform:scale(6);opacity:0;}
}
</style>
</head>

<body>

<!-- PAGE 0 -->
<section class="active" id="s0">
  <h1>ğŸ” Enter Secret Code</h1>
  <input id="code" placeholder="Secret code">
  <p id="timer"></p>
  <button onclick="checkCode()">Enter</button>
</section>

<!-- PAGE 1 -->
<section id="s1">
  <h1>Will you be my Valentine? â¤ï¸</h1>
  <button onclick="next(2)">YES ğŸ’–</button>
  <button id="noBtn">NO ğŸ˜</button>
</section>

<!-- PAGE 2 -->
<section id="s2">
  <h1>Collect 29 Hearts ğŸ’–</h1>
  <p>Score: <span id="score">0</span>/29</p>
  <div id="gameArea"></div>
</section>

<!-- PAGE 3 -->
<section id="s3">
  <h1>ğŸ‰ Happy Birthday Muskan ğŸ‰</h1>
  <p id="hint">Blow the candles ğŸ•¯</p>

  <div class="cake" id="cake">
    <div id="knife">ğŸ”ª</div>

    <div class="layer top" id="topLayer">
      <div class="icing"></div>
      <div class="candle"><div class="flame"></div></div>
      <div class="candle"><div class="flame"></div></div>
      <div class="candle"><div class="flame"></div></div>
    </div>

    <div class="layer bottom" id="bottomLayer">
      <div class="icing"></div>
    </div>

    <div class="slice" id="s1c"></div>
    <div class="slice" id="s2c"></div>
    <div class="slice" id="s3c"></div>
    <div class="slice" id="s4c"></div>
  </div>
</section>

<script>
/* navigation */
function next(n){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.getElementById("s"+n).classList.add("active");
  if(n===2) startGame();
}

/* secret code */
function checkCode(){
  if(code.value==="14052018") next(1);
  else alert("Wrong code âŒ");
}

/* countdown */
const target=new Date("2026-02-08T00:00:00").getTime();
setInterval(()=>{
  const d=target-new Date().getTime();
  timer.innerText=
    Math.floor(d/86400000)+"d "+
    Math.floor((d%86400000)/3600000)+"h "+
    Math.floor((d%3600000)/60000)+"m "+
    Math.floor((d%60000)/1000)+"s";
},1000);

/* NO button dodge */
noBtn.onmouseover=()=>{
  noBtn.style.left=Math.random()*70+"%";
  noBtn.style.top=Math.random()*70+"%";
};

/* GAME */
let score=0;
const scoreSpan=document.getElementById("score");

function startGame(){
  score=0;
  scoreSpan.textContent=0;
  gameArea.innerHTML="";
  const interval=setInterval(()=>{
    const h=document.createElement("div");
    h.innerText=Math.random()<0.3?"ğŸ’”":"ğŸ’–";
    h.style.position="absolute";
    h.style.left=Math.random()*(gameArea.clientWidth-30)+"px";
    h.style.top=Math.random()*(gameArea.clientHeight-30)+"px";
    h.style.fontSize="30px";
    h.onclick=()=>{
      if(h.innerText==="ğŸ’–") score++;
      scoreSpan.textContent=score;
      h.remove();
      if(score===29){
        clearInterval(interval);
        next(3);
      }
    };
    gameArea.appendChild(h);
    setTimeout(()=>h.remove(),1500);
  },600);
}

/* ===== CANDLE BLOW ===== */
let candlesLeft=3;
document.querySelectorAll(".candle").forEach(c=>{
  c.onclick=()=>{
    const flame=c.querySelector(".flame");
    if(flame){
      flame.remove();
      candlesLeft--;
      if(candlesLeft===0){
        hint.innerText="Cut the cake ğŸ‚";
        knife.style.display="block";
      }
    }
  };
});

/* ===== CAKE CUT WITH KNIFE ===== */
const slices=[
  {el:s1c,x:-100,y:20},
  {el:s2c,x:100,y:20},
  {el:s3c,x:-70,y:-40},
  {el:s4c,x:70,y:-40}
];
let cutIndex=0;

cake.onclick=e=>{
  if(candlesLeft>0 || cutIndex>=slices.length) return;

  knife.style.top="20px";
  setTimeout(()=>knife.style.top="-60px",300);

  const s=slices[cutIndex];
  s.el.style.opacity=1;
  s.el.style.transform=`translate(${s.x}px,${s.y}px)`;
  cutIndex++;

  if(cutIndex===slices.length){
    topLayer.style.opacity=0;
    bottomLayer.style.opacity=0;
    fireworks();
  }
};

/* fireworks */
function fireworks(){
  setInterval(()=>{
    const f=document.createElement("div");
    f.className="firework";
    f.style.left=Math.random()*100+"vw";
    f.style.top=Math.random()*60+"vh";
    f.style.background=`hsl(${Math.random()*360},100%,50%)`;
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1200);
  },200);
}

/* background hearts */
setInterval(()=>{
  const h=document.createElement("div");
  h.className="bg-heart";
  h.innerText="â¤ï¸";
  h.style.left=Math.random()*100+"vw";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),6000);
},400);
</script>

</body>
</html>
