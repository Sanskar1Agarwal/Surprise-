<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Realistic Cake Cutting</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        background-color: #fff8f0;
        padding: 20px;
    }
    h1 {
        color: #d2691e;
    }
    canvas {
        border: 2px solid #d2691e;
        border-radius: 50%;
        margin-top: 20px;
        cursor: pointer;
        max-width: 90vw;
    }
    #info {
        margin-top: 20px;
        font-size: 18px;
        color: #8b4513;
    }
    button {
        padding: 10px 20px;
        font-size: 16px;
        margin-top: 10px;
        background-color: #d2691e;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    button:hover {
        background-color: #b35915;
    }
</style>
</head>
<body>

<h1>Realistic Cake Cutting ðŸŽ‚</h1>
<p>Click the cake to cut it into equal slices (max 6 cuts)!</p>
<canvas id="cakeCanvas" width="500" height="500"></canvas>
<div id="info">Slices cut: 0 | Pieces: 1</div>
<button onclick="resetCake()">Reset Cake</button>

<script>
const canvas = document.getElementById('cakeCanvas');
const ctx = canvas.getContext('2d');
const radius = canvas.width / 2 - 40;
const center = {x: canvas.width/2, y: canvas.height/2};

const maxCuts = 6;
let cutCount = 0;
let slices = [{start:0,end:2*Math.PI,offset:0}];

function drawSprinkles(slice){
    const num = 15;
    for(let i=0;i<num;i++){
        const angle = slice.start + Math.random()*(slice.end-slice.start);
        const r = Math.random()*radius*0.7;
        const x = center.x + (r+slice.offset)*Math.cos(angle);
        const y = center.y + (r+slice.offset)*Math.sin(angle);
        ctx.beginPath();
        ctx.fillStyle=['#FF0000','#00FF00','#FFFF00','#FFA500','#FF69B4'][Math.floor(Math.random()*5)];
        ctx.arc(x,y,3,0,Math.PI*2);
        ctx.fill();
    }
}

function drawCake(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    slices.forEach(slice=>{
        const offsetX = slice.offset*Math.cos((slice.start+slice.end)/2);
        const offsetY = slice.offset*Math.sin((slice.start+slice.end)/2);

        // Draw cake slice
        const grad = ctx.createRadialGradient(center.x+offsetX, center.y+offsetY, radius*0.2, center.x+offsetX, center.y+offsetY, radius);
        grad.addColorStop(0,'#fff5e6'); // icing
        grad.addColorStop(0.3,'#FFDAB9'); // cake
        grad.addColorStop(1,'#FFB07C');

        ctx.fillStyle = grad;
        ctx.beginPath();
        ctx.moveTo(center.x+offsetX, center.y+offsetY);
        ctx.arc(center.x+offsetX, center.y+offsetY, radius, slice.start, slice.end);
        ctx.closePath();
        ctx.fill();

        // Slice border
        ctx.strokeStyle='#8B4513';
        ctx.lineWidth=2;
        ctx.stroke();

        // Draw sprinkles
        drawSprinkles(slice);
    });
}

function cutCake(){
    if(cutCount>=maxCuts) return;

    cutCount++;
    const numSlices = cutCount;
    const angle = 2*Math.PI/numSlices;
    slices = [];

    // Create slices with offset 0
    for(let i=0;i<numSlices;i++){
        slices.push({start:i*angle,end:(i+1)*angle,offset:0});
    }

    animateSeparation();
    document.getElementById('info').innerText=`Slices cut: ${cutCount} | Pieces: ${numSlices}`;
}

// Animate slices moving apart
function animateSeparation(){
    let step=0;
    const maxStep=20;

    function animate(){
        step++;
        slices.forEach(slice=>{
            slice.offset = (step/maxStep)*30; // maximum 30px separation
        });
        drawCake();
        if(step<maxStep) requestAnimationFrame(animate);
    }
    animate();
}

function resetCake(){
    cutCount=0;
    slices=[{start:0,end:2*Math.PI,offset:0}];
    drawCake();
    document.getElementById('info').innerText='Slices cut: 0 | Pieces: 1';
}

// Event
canvas.addEventListener('click',cutCake);

// Initial draw
drawCake();
</script>

</body>
</html>
